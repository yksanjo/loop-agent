<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loop Agent Dashboard</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto; background: linear-gradient(135deg, #1a1a2e, #16213e); color: #fff; min-height: 100vh; padding: 20px; }
    .container { max-width: 1200px; margin: 0 auto; }
    h1 { font-size: 2.5rem; margin-bottom: 10px; background: linear-gradient(90deg, #00d9ff, #00ff88); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .subtitle { color: #8892b0; margin-bottom: 30px; }
    .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
    .stat { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 25px; text-align: center; border: 1px solid rgba(255,255,255,0.1); }
    .stat-value { font-size: 3rem; font-weight: bold; margin-bottom: 10px; }
    .stat-label { color: #8892b0; text-transform: uppercase; letter-spacing: 1px; }
    .progress { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 30px; margin-bottom: 30px; }
    .progress-bar { background: rgba(255,255,255,0.1); border-radius: 10px; height: 30px; overflow: hidden; margin-top: 15px; }
    .progress-fill { height: 100%; background: linear-gradient(90deg, #00d9ff, #00ff88); transition: width 0.5s; display: flex; align-items: center; justify-content: flex-end; padding-right: 15px; font-weight: bold; }
    .projects { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
    .project { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 25px; border: 1px solid rgba(255,255,255,0.1); }
    .project.completed { border-color: #00ff88; background: rgba(0,255,136,0.05); }
    .project-header { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
    .project-icon { font-size: 2rem; }
    .project-name { font-size: 1.3rem; font-weight: bold; flex: 1; }
    .status { padding: 5px 15px; border-radius: 20px; font-size: 0.8rem; font-weight: bold; }
    .status.pending { background: rgba(255,255,255,0.1); color: #8892b0; }
    .status.completed { background: rgba(0,255,136,0.2); color: #00ff88; }
    .lang { display: inline-block; padding: 3px 10px; border-radius: 5px; font-size: 0.75rem; margin-bottom: 10px; }
    .lang-ts { background: rgba(50,150,255,0.2); color: #3299ff; }
    .lang-go { background: rgba(0,217,255,0.2); color: #00d9ff; }
    .lang-py { background: rgba(255,217,0,0.2); color: #ffd900; }
    .lang-rs { background: rgba(255,100,100,0.2); color: #ff6464; }
    .link { display: block; color: #00d9ff; text-decoration: none; padding: 10px; background: rgba(0,217,255,0.1); border-radius: 8px; text-align: center; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ðŸš€ Loop Agent</h1>
    <p class="subtitle">Autonomous AI Infrastructure Creator | github.com/yksanjo</p>
    
    <div class="stats">
      <div class="stat"><div class="stat-value" id="total">10</div><div class="stat-label">Total</div></div>
      <div class="stat"><div class="stat-value" id="completed">0</div><div class="stat-label">Completed</div></div>
      <div class="stat"><div class="stat-value" id="rate">0%</div><div class="stat-label">Success</div></div>
    </div>
    
    <div class="progress">
      <h2>Progress</h2>
      <div class="progress-bar"><div class="progress-fill" id="bar">0%</div></div>
    </div>
    
    <h2 style="margin-bottom: 20px;">Projects</h2>
    <div class="projects" id="grid"></div>
  </div>
  
  <script>
    const projects = [
      { name: 'agent-waf', lang: 'ts', icon: 'ðŸ”’' },
      { name: 'agent-observability', lang: 'go', icon: 'ðŸ“Š' },
      { name: 'agent-gateway', lang: 'rs', icon: 'ðŸŒ' },
      { name: 'agent-memory-store', lang: 'py', icon: 'ðŸ’¾' },
      { name: 'agent-orchestrator', lang: 'ts', icon: 'ðŸŽ¯' },
      { name: 'agent-registry', lang: 'go', icon: 'ðŸ“‹' },
      { name: 'agent-policy-engine', lang: 'rs', icon: 'ðŸ›¡ï¸' },
      { name: 'agent-cache', lang: 'py', icon: 'âš¡' },
      { name: 'agent-queue', lang: 'ts', icon: 'ðŸ“¨' },
      { name: 'agent-config', lang: 'go', icon: 'âš™ï¸' },
    ];
    
    async function load() {
      try {
        const res = await fetch('/logs.json');
        if (!res.ok) return [];
        return await res.json();
      } catch { return []; }
    }
    
    function render(logs) {
      const completed = logs.length;
      const success = logs.filter(l => l.result?.success).length;
      const rate = completed > 0 ? Math.round((success / completed) * 100) : 0;
      const pct = Math.min(100, Math.round((completed / 10) * 100));
      
      document.getElementById('completed').textContent = success;
      document.getElementById('rate').textContent = rate + '%';
      document.getElementById('bar').style.width = pct + '%';
      document.getElementById('bar').textContent = pct + '%';
      
      const grid = document.getElementById('grid');
      grid.innerHTML = '';
      
      projects.forEach((p, i) => {
        const log = logs[i];
        const status = log ? (log.result?.success ? 'completed' : 'failed') : 'pending';
        const url = log?.result?.url || `https://github.com/yksanjo/agent-infra-${p.name}`;
        
        const card = document.createElement('div');
        card.className = `project ${status}`;
        card.innerHTML = `
          <div class="project-header">
            <span class="project-icon">${p.icon}</span>
            <span class="project-name">${p.name}</span>
            <span class="status ${status}">${status}</span>
          </div>
          <span class="lang lang-${p.lang}">${p.lang.toUpperCase()}</span>
          <a href="${url}" target="_blank" class="link">${status === 'pending' ? 'Coming soon...' : 'View on GitHub â†’'}</a>
        `;
        grid.appendChild(card);
      });
    }
    
    load().then(render);
    setInterval(() => load().then(render), 3000);
  </script>
</body>
</html>
